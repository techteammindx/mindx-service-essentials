# Sub-Folder `CLAUDE.md` Specification

## Purpose
- Equip Claude with scoped, high-value context when operating inside a specific sub-folder.
- Provide additive rules that complement (never duplicate) the project/root `CLAUDE.md`.
- Reduce risk in sensitive modules by documenting local constraints and hazards.

## When To Create
- The sub-folder owns unique architecture, domain logic, or integration points that Claude must understand before editing.
- Repeated Claude mistakes stem from missing local instructions.
- The folder contains fragile or auto-generated assets that require explicit guardrails.
- Skip creation if the root `CLAUDE.md` already covers the behavior with sufficient specificity.

## File Placement & Naming
- File path must be `<project-sub-folder>/CLAUDE.md` with uppercase filename; lowercase variants are ignored.
- Keep files inside regular directories only; do not use `.claude/CLAUDE.md` for this spec.
- Target file length under 250 lines. Offload detail to referenced docs instead of inflating the file.

## Required Sections (in order)
1. `# Scope`
   - Two to four bullets summarizing the folder’s role, primary entry points, and when Claude should operate here.
2. `# Key Files & Responsibilities`
   - Bullet catalog of critical files, patterns, or workflows in the folder.
   - Each bullet pairs a file/path with a short directive or behavioral note.
3. `# Interfaces & Dependencies`
   - List downstream consumers, upstream inputs, external APIs, message topics, or shared libraries this folder depends on or serves.
   - Highlight contracts Claude must respect (payload shapes, status codes, events, etc.).
4. `# Implementation Rules`
   - Folder-specific architectural, performance, security, or data-handling constraints.
   - Explicitly call out invariants or checks Claude must run (feature flags, schema migrations, tenancy considerations).
5. `# Do Not Touch Unless Explicitly Instructed By User`
   - Enumerate fragile files, autogenerated assets, or processes Claude must leave untouched.
   - Include rationale when needed (e.g., “synced from upstream service nightly”).
6. `# References`
   - Use `@` imports or relative Markdown links to deeper documentation, specs, or ADRs.
   - Reference PRs, tickets, or changelogs that justify rules.

## Authoring Guidelines
- Write blunt, imperative bullets; avoid narrative prose.
- Never restate global expectations already captured in higher-level `CLAUDE.md`.
- Omit any commands section—this spec forbids command listings in sub-folder files.
- Highlight assumptions Claude must validate before edits (environment variables, feature switches, data contracts).
- Prefer short clauses; trim filler words to control token usage.

## Maintenance Rules
- Update the sub-folder `CLAUDE.md` whenever:
  - Ownership of key files shifts.
  - New integrations, interfaces, or risks appear.
  - Claude failures reveal missing or outdated context.
  - During scheduled quarterly documentation reviews.
- Remove obsolete bullets promptly to avoid contradictory guidance.
- Record major changes via commit messages referencing related issues or ADRs.

## Quality Checks
- Dry-run validation: ask Claude to summarize the folder using only the file. Revise until the summary is accurate.
- Ensure all `@` imports resolve and stay within the five-hop limit documented by Anthropic.
- Conduct a token audit when the file grows; consolidate or migrate detail to supporting docs if approaching the size limit.

## Known Open Questions
- Should future versions add a testing expectations section?
- What thresholds trigger creating a sub-folder file versus updating the parent?
- Do updates require SME or tech lead approval before merge?
